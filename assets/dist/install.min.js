(function(){var e,t,r,n,s,o,i,a,u,c,l,p,h,g,d,f,m,v,y,w,b,P,S,k,q,L,x,R,T,C,E,j,I,M,O,$,A,N,_,F,U,W,X,D,H,z,G,B,J=[].slice,K={}.hasOwnProperty,Q=function(e,t){function r(){this.constructor=e}for(var n in t)K.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},V=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};for(w={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},R=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?e:+new Date},C=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==C&&(C=function(e){return setTimeout(e,50)},y=function(e){return clearTimeout(e)}),j=function(e){var t,r;return t=R(),r=function(){var n;return n=R()-t,n>=33?(t=R(),e(n,function(){return C(r)})):setTimeout(r,33-n)},r()},E=function(){var e,t,r;return r=arguments[0],t=arguments[1],e=arguments.length>=3?J.call(arguments,2):[],"function"==typeof r[t]?r[t].apply(r,e):r[t]},b=function(){var e,t,r,n,s,o,i;for(t=arguments[0],n=arguments.length>=2?J.call(arguments,1):[],o=0,i=n.length;i>o;o++)if(r=n[o])for(e in r)K.call(r,e)&&(s=r[e],null!=t[e]&&"object"==typeof t[e]&&null!=s&&"object"==typeof s?b(t[e],s):t[e]=s);return t},f=function(e){var t,r,n,s,o;for(r=t=0,s=0,o=e.length;o>s;s++)n=e[s],r+=Math.abs(n),t++;return r/t},S=function(e,t){var r,n,s;if(null==e&&(e="options"),null==t&&(t=!0),s=document.querySelector("[data-pace-"+e+"]")){if(r=s.getAttribute("data-pace-"+e),!t)return r;try{return JSON.parse(r)}catch(o){return n=o,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",n):void 0}}},i=function(){function e(){}return e.prototype.on=function(e,t,r,n){var s;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(s=this.bindings)[e]&&(s[e]=[]),this.bindings[e].push({handler:t,ctx:r,once:n})},e.prototype.once=function(e,t,r){return this.on(e,t,r,!0)},e.prototype.off=function(e,t){var r,n,s;if(null!=(null!=(n=this.bindings)?n[e]:void 0)){if(null==t)return delete this.bindings[e];for(r=0,s=[];this.bindings[e].length>r;)this.bindings[e][r].handler===t?s.push(this.bindings[e].splice(r,1)):s.push(r++);return s}},e.prototype.trigger=function(){var e,t,r,n,s,o,i,a,u;if(r=arguments[0],e=arguments.length>=2?J.call(arguments,1):[],null!=(i=this.bindings)?i[r]:void 0){for(s=0,u=[];this.bindings[r].length>s;)a=this.bindings[r][s],n=a.handler,t=a.ctx,o=a.once,n.apply(null!=t?t:this,e),o?u.push(this.bindings[r].splice(s,1)):u.push(s++);return u}},e}(),null==window.Pace&&(window.Pace={}),b(Pace,i.prototype),T=Pace.options=b({},w,window.paceOptions,S()),z=["ajax","document","eventLag","elements"],W=0,D=z.length;D>W;W++)$=z[W],T[$]===!0&&(T[$]=w[$]);u=function(e){function t(){return G=t.__super__.constructor.apply(this,arguments)}return Q(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(e=document.querySelector(T.target),!e)throw new u;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return e=this.getElement(),e.className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){u=e}return this.el=void 0},e.prototype.render=function(){var e,t;return null==document.querySelector(T.target)?!1:(e=this.getElement(),e.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||0|(this.lastRenderedProgress|0!==this.progress))&&(e.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?t="99":(t=10>this.progress?"0":"",t+=0|this.progress),e.children[0].setAttribute("data-progress",""+t)),this.lastRenderedProgress=this.progress)},e.prototype.done=function(){return this.progress>=100},e}(),a=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var r,n,s,o,i;if(null!=this.bindings[e]){for(o=this.bindings[e],i=[],n=0,s=o.length;s>n;n++)r=o[n],i.push(r.call(this,t));return i}},e.prototype.on=function(e,t){var r;return null==(r=this.bindings)[e]&&(r[e]=[]),this.bindings[e].push(t)},e}(),U=window.XMLHttpRequest,F=window.XDomainRequest,_=window.WebSocket,P=function(e,t){var r,n,s,o;o=[];for(n in t.prototype)try{s=t.prototype[n],null==e[n]&&"function"!=typeof s?o.push(e[n]=s):o.push(void 0)}catch(i){r=i}return o},L=[],Pace.ignore=function(){var e,t,r;return t=arguments[0],e=arguments.length>=2?J.call(arguments,1):[],L.unshift("ignore"),r=t.apply(null,e),L.shift(),r},Pace.track=function(){var e,t,r;return t=arguments[0],e=arguments.length>=2?J.call(arguments,1):[],L.unshift("track"),r=t.apply(null,e),L.shift(),r},O=function(e){var t;if(null==e&&(e="GET"),"track"===L[0])return"force";if(!L.length&&T.ajax){if("socket"===e&&T.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),V.call(T.ajax.trackMethods,t)>=0)return!0}return!1},c=function(e){function t(){var e,r=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(n,s){return O(n)&&r.trigger("request",{type:n,url:s,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var r;return r=new U(t),e(r),r},P(window.XMLHttpRequest,U),null!=F&&(window.XDomainRequest=function(){var t;return t=new F,e(t),t},P(window.XDomainRequest,F)),null!=_&&T.ajax.trackWebSockets&&(window.WebSocket=function(e,t){var n;return n=null!=t?new _(e,t):new _(e),O("socket")&&r.trigger("request",{type:"socket",url:e,protocols:t,request:n}),n},P(window.WebSocket,_))}return Q(t,e),t}(a),X=null,k=function(){return null==X&&(X=new c),X},M=function(e){var t,r,n,s;for(s=T.ajax.ignoreURLs,r=0,n=s.length;n>r;r++)if(t=s[r],"string"==typeof t){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1},k().on("request",function(t){var r,n,s,o,i;return o=t.type,s=t.request,i=t.url,M(i)?void 0:Pace.running||T.restartOnRequestAfter===!1&&"force"!==O(o)?void 0:(n=arguments,r=T.restartOnRequestAfter||0,"boolean"==typeof r&&(r=0),setTimeout(function(){var t,r,i,a,u,c;if(t="socket"===o?2>s.readyState:(a=s.readyState)>0&&4>a){for(Pace.restart(),u=Pace.sources,c=[],r=0,i=u.length;i>r;r++){if($=u[r],$ instanceof e){$.watch.apply($,n);break}c.push(void 0)}return c}},r))}),e=function(){function e(){var e=this;this.elements=[],k().on("request",function(){return e.watch.apply(e,arguments)})}return e.prototype.watch=function(e){var t,r,n,s;return n=e.type,t=e.request,s=e.url,M(s)?void 0:(r="socket"===n?new h(t):new g(t),this.elements.push(r))},e}(),g=function(){function e(e){var t,r,n,s,o,i,a=this;if(this.progress=0,null!=window.ProgressEvent)for(r=null,e.addEventListener("progress",function(e){return a.progress=e.lengthComputable?100*e.loaded/e.total:a.progress+(100-a.progress)/2}),i=["load","abort","timeout","error"],n=0,s=i.length;s>n;n++)t=i[n],e.addEventListener(t,function(){return a.progress=100});else o=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?a.progress=100:3===e.readyState&&(a.progress=50),"function"==typeof o?o.apply(null,arguments):void 0}}return e}(),h=function(){function e(e){var t,r,n,s,o=this;for(this.progress=0,s=["error","open"],r=0,n=s.length;n>r;r++)t=s[r],e.addEventListener(t,function(){return o.progress=100})}return e}(),n=function(){function e(e){var t,r,n,o;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),o=e.selectors,r=0,n=o.length;n>r;r++)t=o[r],this.elements.push(new s(t))}return e}(),s=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},T.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),r=function(){function e(){var e,t,r=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=r.states[document.readyState]&&(r.progress=r.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),o=function(){function e(){var e,t,r,n,s,o=this;this.progress=0,e=0,s=[],n=0,r=R(),t=setInterval(function(){var i;return i=R()-r-50,r=R(),s.push(i),s.length>T.eventLag.sampleCount&&s.shift(),e=f(s),++n>=T.eventLag.minSamples&&T.eventLag.lagThreshold>e?(o.progress=100,clearInterval(t)):o.progress=100*(3/(e+3))},50)}return e}(),p=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=T.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=E(this.source,"progress"))}return e.prototype.tick=function(e,t){var r;return null==t&&(t=E(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/T.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),r=1-Math.pow(this.progress/100,T.easeFactor),this.progress+=r*this.rate*e,this.progress=Math.min(this.lastProgress+T.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),A=null,I=null,m=null,N=null,d=null,v=null,Pace.running=!1,q=function(){return T.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(H=window.history.pushState,window.history.pushState=function(){return q(),H.apply(window.history,arguments)}),null!=window.history.replaceState&&(B=window.history.replaceState,window.history.replaceState=function(){return q(),B.apply(window.history,arguments)}),l={ajax:e,elements:n,document:r,eventLag:o},(x=function(){var e,r,n,s,o,i,a,u;for(Pace.sources=A=[],i=["ajax","elements","document","eventLag"],r=0,s=i.length;s>r;r++)e=i[r],T[e]!==!1&&A.push(new l[e](T[e]));for(u=null!=(a=T.extraSources)?a:[],n=0,o=u.length;o>n;n++)$=u[n],A.push(new $(T));return Pace.bar=m=new t,I=[],N=new p})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,m.destroy(),v=!0,null!=d&&("function"==typeof y&&y(d),d=null),x()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var e;return Pace.running=!0,m.render(),e=R(),v=!1,d=j(function(t,r){var n,s,o,i,a,u,c,l,h,g,d,f,y,w,b,P;for(l=100-m.progress,s=d=0,o=!0,u=f=0,w=A.length;w>f;u=++f)for($=A[u],g=null!=I[u]?I[u]:I[u]=[],a=null!=(P=$.elements)?P:[$],c=y=0,b=a.length;b>y;c=++y)i=a[c],h=null!=g[c]?g[c]:g[c]=new p(i),o&=h.done,h.done||(s++,d+=h.tick(t));return n=d/s,m.update(N.tick(t,n)),m.done()||o||v?(m.update(100),Pace.trigger("done"),setTimeout(function(){return m.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(T.ghostTime,Math.max(T.minTime-(R()-e),0)))):r()})},Pace.start=function(e){b(T,e),Pace.running=!0;try{m.render()}catch(t){u=t}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:T.startOnPageLoad&&Pace.start()}).call(this);var Install={migrate:function(){var e=1;progressInterval=setInterval(function(){e+=.5,$(".progress-bar").css("width",e+"%"),e>=99&&clearInterval(progressInterval)},100),$.post("runmigrations",function(t){e=100,$(".progress-bar").css("width","100%"),clearInterval(progressInterval),$("#inprogress").hide(),t.migrated?($(".progress-bar").removeClass("progress-bar-warning").addClass("progress-bar-success"),$("#done").show(),$("#continue-button").removeClass("pure-button-disabled")):($(".progress-bar").removeClass("progress-bar-warning").addClass("progress-danger"),$("#error").show())}).error(function(){$("#inprogress").hide(),e=100,$(".progress-bar").css("width","100%"),clearInterval(progressInterval),$(".progress-bar").removeClass("progress-bar-warning").addClass("progress-bar-danger"),$("#error").show()})}};paceOptions={ajax:!0,document:!0,eventLag:!1};